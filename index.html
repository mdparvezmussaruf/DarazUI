<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daraz Clone - Premium Store</title>

<style>
/* ---------------- üé® DARAZ THEME COLORS ---------------- */
:root {
  --daraz-orange: #f57224;
  --daraz-bg: #eff0f5;
  --text-main: #212121;
  --text-light: #757575;
  --blue-link: #1a9cb7;
  --white: #ffffff;
  --shadow: 0 2px 4px 0 rgba(0,0,0,.08);
}

* { box-sizing: border-box; font-family: 'Roboto', 'Inter', sans-serif; transition: all 0.2s ease; }
body { margin: 0; background: var(--daraz-bg); color: var(--text-main); }

/* ---------------- üè¢ HEADER STYLE ---------------- */
header {
  background: var(--white);
  padding: 10px 5%;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: var(--shadow);
}

.nav-container {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
}

.logo {
  font-size: 28px;
  font-weight: 900;
  color: var(--daraz-orange);
  text-decoration: none;
  font-style: italic;
}

.search-box {
  flex-grow: 1;
  display: flex;
  max-width: 700px;
}

header input {
  width: 100%;
  padding: 12px 15px;
  border: none;
  background: #f5f5f5;
  border-radius: 2px 0 0 2px;
  outline: none;
}

.search-btn {
  background: var(--daraz-orange);
  padding: 0 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0 2px 2px 0;
}

.nav-actions {
  display: flex;
  gap: 15px;
  align-items: center;
}

.nav-link {
  color: var(--text-main);
  text-decoration: none;
  font-size: 14px;
  cursor: pointer;
}
.nav-link:hover { color: var(--daraz-orange); }

/* ---------------- üì¶ PRODUCT GRID ---------------- */
.container {
  max-width: 1200px;
  margin: 20px auto;
  padding: 0 15px;
}

#productGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
  gap: 12px;
}

.product {
  background: var(--white);
  padding: 0;
  overflow: hidden;
  border-radius: 2px;
}
.product:hover {
  transform: translateY(-2px);
  box-shadow: 0 2px 15px rgba(0,0,0,0.1);
}

.product img {
  width: 100%;
  height: 190px;
  object-fit: cover;
}

.product-info {
  padding: 10px;
}

.product h4 {
  margin: 0 0 5px 0;
  font-size: 14px;
  font-weight: 400;
  height: 36px;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.price {
  color: var(--daraz-orange);
  font-size: 18px;
  font-weight: 500;
  margin: 8px 0;
}

.tags {
  font-size: 11px;
  color: var(--blue-link);
  margin-bottom: 10px;
}

/* ---------------- üîò BUTTONS ---------------- */
.btn-buy {
  width: 100%;
  background: var(--daraz-orange);
  color: white;
  border: none;
  padding: 8px;
  font-weight: bold;
  cursor: pointer;
  border-radius: 2px;
}
.btn-buy:hover { opacity: 0.9; }

.btn-admin { background: #333; }

/* ---------------- üõí MODALS ---------------- */
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
.modal.open { display: flex; }

.modal-content {
  background: var(--white);
  padding: 25px;
  width: 95%;
  max-width: 500px;
  border-radius: 4px;
}

/* ---------------- üõ†Ô∏è ADMIN TABLE ---------------- */
.product-table {
  width: 100%;
  background: white;
  border-collapse: collapse;
}
.product-table th { background: #fafafa; padding: 12px; text-align: left; font-size: 13px; color: var(--text-light); }
.product-table td { padding: 12px; border-top: 1px solid #eee; font-size: 14px; }

/* ---------------- üìÑ PAGES ---------------- */
.page-view { display: none; }
.page-view.active { display: block; }
</style>
</head>

<body>

<header>
  <div class="nav-container">
    <a href="#store" class="logo">daraz</a>
    
    <div class="search-box">
      <input id="search" placeholder="Search in Daraz">
      <div class="search-btn">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="white"><path d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.34-5.34ZM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12Z"/></svg>
      </div>
    </div>

    <div class="nav-actions">
      <span class="nav-link" onclick="changePage('admin')">Admin</span>
      <span class="nav-link" onclick="changePage('store')">Store</span>
      <div class="nav-link" onclick="openCart()" style="position: relative;">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
        <span id="cartCount" style="position:absolute; top:-8px; right:-10px; background:var(--daraz-orange); color:white; border-radius:50%; padding:2px 6px; font-size:10px;">0</span>
      </div>
    </div>
  </div>
</header>

<main class="container">

  <div id="storeView" class="page-view active">
    <div id="productGrid"></div>
  </div>

  <div id="adminView" class="page-view">
    <div style="background: white; padding: 20px; border-radius: 4px;">
      <h2 style="margin-top:0">Product Management</h2>
      <form id="productForm" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <input required placeholder="Product Name" id="pName" style="grid-column: span 2; border: 1px solid #ddd; padding: 10px;">
        <input required placeholder="Price (‡ß≥)" id="pPrice" type="number" style="border: 1px solid #ddd; padding: 10px;">
        <input required placeholder="Tags (#mobile)" id="pTags" style="border: 1px solid #ddd; padding: 10px;">
        <input required placeholder="Image URL" id="pImg" style="grid-column: span 2; border: 1px solid #ddd; padding: 10px;">
        <button type="submit" class="btn-buy" style="grid-column: span 2;">Add New Product</button>
      </form>

      <h3 style="margin-top: 30px;">Inventory</h3>
      <div id="adminProductList"></div>
    </div>
  </div>

</main>

<div class="modal" id="cartModal">
  <div class="modal-content">
    <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:15px;">
        <h3 style="margin:0">My Cart</h3>
        <span onclick="closeCart()" style="cursor:pointer; font-size:24px;">&times;</span>
    </div>
    <div id="cartItems"></div>
    <div style="margin-top:20px; text-align:right;">
        <p>Total: <strong style="color:var(--daraz-orange); font-size:20px;">‡ß≥<span id="total">0</span></strong></p>
        <button onclick="openCheckout()" class="btn-buy" style="width: auto; padding: 10px 40px;">PROCEED TO CHECKOUT</button>
    </div>
  </div>
</div>

<div class="modal" id="checkoutModal">
  <div class="modal-content">
    <h3>Checkout</h3>
    <div id="orderReview" style="background:#f9f9f9; padding:15px; margin-bottom:15px; font-size:14px;">
        <div id="reviewItems"></div>
        <hr>
        <strong>Total: ‡ß≥<span id="reviewTotal">0</span></strong>
    </div>

    <form id="checkoutForm">
      <input required placeholder="Full Name" id="name" style="width:100%; margin-bottom:10px; padding:10px; border:1px solid #ddd;">
      <input required placeholder="Phone Number" id="phone1" style="width:100%; margin-bottom:10px; padding:10px; border:1px solid #ddd;">
      <textarea required placeholder="Delivery Address" id="address" style="width:100%; margin-bottom:10px; padding:10px; border:1px solid #ddd;"></textarea>

      <select id="payment" required style="width:100%; margin-bottom:20px; padding:10px; border:1px solid #ddd;">
        <option value="">Select Payment Method</option>
        <option value="bkash">bKash</option>
        <option value="cod">Cash on Delivery</option>
      </select>

      <div style="display:flex; gap:10px;">
        <button type="submit" class="btn-buy">CONFIRM ORDER</button>
        <button type="button" onclick="closeCheckout()" style="background:#ccc; border:none; padding:10px; cursor:pointer;">Cancel</button>
      </div>
    </form>
  </div>
</div>

<script>
/* (All the logic from your original code remains exactly the same to ensure functionality) */
const INITIAL_PRODUCTS = [
  {id:1,name:"Wireless Headphone X - Noise Cancelling",price:3500,tags:["#audio","#wireless"],img:"https://picsum.photos/300/300?v=1"},
  {id:2,name:"Smart Watch Pro Series 7 - Black Edition",price:2800,tags:["#watch","#smart"],img:"https://picsum.photos/300/300?v=2"},
  {id:3,name:"Bluetooth Speaker Mini - High Bass",price:2200,tags:["#audio","#speaker"],img:"https://picsum.photos/300/300?v=3"},
  {id:4,name:"Mechanical Gaming Keyboard RGB",price:4500,tags:["#pc","#gaming"],img:"https://picsum.photos/300/300?v=4"}
];

function getProducts() {
  const stored = localStorage.getItem("products");
  if (!stored) {
    localStorage.setItem("products", JSON.stringify(INITIAL_PRODUCTS));
    return INITIAL_PRODUCTS;
  }
  return JSON.parse(stored);
}

let products = getProducts();
let cart = JSON.parse(localStorage.getItem("cart")) || [];

function saveProducts() {
  localStorage.setItem("products", JSON.stringify(products));
  renderAdminProducts();
  renderProducts(products);
}

function saveCart() {
  cart = cart.filter(item => item.quantity > 0);
  localStorage.setItem("cart", JSON.stringify(cart));
  document.getElementById("cartCount").innerText = cart.length;
}

function addToCart(productId) {
  const id = parseInt(productId);
  const existingItem = cart.find(item => item.id === id);
  const product = products.find(p => p.id === id);
  if (!product) return;
  if (existingItem) { existingItem.quantity += 1; } 
  else { cart.push({ ...product, quantity: 1 }); }
  saveCart();
  openCart();
}

function updateQuantity(id, delta) {
  const item = cart.find(item => item.id === id);
  if (item) {
    item.quantity += delta;
    if (item.quantity < 1) item.quantity = 0; 
  }
  saveCart();
  openCart();
}

function renderProducts(list) {
  const grid = document.getElementById("productGrid");
  grid.innerHTML = "";
  list.forEach(p => {
    grid.innerHTML += `
      <div class="product">
        <img src="${p.img}" alt="${p.name}">
        <div class="product-info">
            <h4>${p.name}</h4>
            <p class="price">‡ß≥${p.price}</p>
            <p class="tags">${p.tags.join(" ")}</p>
            <button class="btn-buy" onclick='addToCart(${p.id})'>Add to Cart</button>
        </div>
      </div>`;
  });
}

function renderAdminProducts() {
  const adminList = document.getElementById("adminProductList");
  let tableHTML = `<table class="product-table"><thead><tr><th>ID</th><th>Name</th><th>Price</th><th>Actions</th></tr></thead><tbody>`;
  products.forEach(p => {
    tableHTML += `<tr><td>${p.id}</td><td>${p.name}</td><td>‡ß≥${p.price}</td><td><button onclick='deleteProduct(${p.id})' style='color:red; border:none; background:none; cursor:pointer;'>Delete</button></td></tr>`;
  });
  tableHTML += `</tbody></table>`;
  adminList.innerHTML = tableHTML;
}

function openCart() {
  const modal = document.getElementById("cartModal");
  modal.classList.add("open");
  const items = document.getElementById("cartItems");
  let total = 0;
  items.innerHTML = cart.length === 0 ? "<p>Empty Cart</p>" : "";
  cart.forEach(c => {
    total += (c.price * c.quantity);
    items.innerHTML += `
      <div style="display:flex; justify-content:space-between; margin-bottom:10px; font-size:14px;">
        <span>${c.name}</span>
        <div>
            <button onclick="updateQuantity(${c.id}, -1)">-</button>
            <span>${c.quantity}</span>
            <button onclick="updateQuantity(${c.id}, 1)">+</button>
            <span style="margin-left:10px;">‡ß≥${c.price * c.quantity}</span>
        </div>
      </div>`;
  });
  document.getElementById("total").innerText = total;
}

function closeCart() { document.getElementById("cartModal").classList.remove("open"); }

function openCheckout() {
  if (cart.length === 0) return alert("Cart empty");
  closeCart();
  document.getElementById("reviewTotal").innerText = document.getElementById("total").innerText;
  document.getElementById("checkoutModal").classList.add("open");
}

function closeCheckout() { document.getElementById("checkoutModal").classList.remove("open"); }

function changePage(pageId) {
  document.querySelectorAll('.page-view').forEach(v => v.classList.remove('active'));
  document.getElementById(pageId + 'View').classList.add('active');
  if (pageId === 'admin') renderAdminProducts();
}

document.getElementById("productForm").addEventListener("submit", e => {
  e.preventDefault();
  const newProduct = {
    id: Date.now(),
    name: document.getElementById("pName").value,
    price: parseFloat(document.getElementById("pPrice").value),
    tags: document.getElementById("pTags").value.split(' '),
    img: document.getElementById("pImg").value
  };
  products.push(newProduct);
  saveProducts();
  document.getElementById("productForm").reset();
});

function deleteProduct(id) {
  if (confirm("Delete product?")) {
    products = products.filter(p => p.id !== id);
    saveProducts();
  }
}

document.getElementById("checkoutForm").addEventListener("submit", e => {
  e.preventDefault();
  alert("Order Placed Successfully!");
  cart = [];
  saveCart();
  closeCheckout();
  changePage('store');
});

// Search functionality
document.getElementById("search").addEventListener("input", (e) => {
    const term = e.target.value.toLowerCase();
    const filtered = products.filter(p => 
        p.name.toLowerCase().includes(term) || 
        p.tags.some(t => t.toLowerCase().includes(term))
    );
    renderProducts(filtered);
});

// Initial
saveCart();
renderProducts(products);
</script>

</body>
</html>
